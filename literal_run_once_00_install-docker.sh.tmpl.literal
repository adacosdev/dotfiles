#!/bin/bash
# {{ if eq .chezmoi.os "linux" }}
echo "ğŸ³ Configurando Docker..."

install_docker() {
    {{ if eq .chezmoi.osRelease.id "ubuntu" "debian" -}}
    sudo apt update
    sudo apt install -y docker.io docker-compose
    sudo usermod -aG docker $USER
    {{ else if eq .chezmoi.osRelease.id "arch" "endeavouros" -}}
    sudo pacman -S --noconfirm docker docker-compose
    sudo systemctl enable --now docker
    sudo usermod -aG docker $USER
    {{ else if eq .chezmoi.osRelease.id "fedora" -}}
    sudo dnf install -y moby-engine docker-compose
    sudo systemctl enable --now docker
    sudo usermod -aG docker $USER
    {{ end -}}
}

if ! command -v docker &> /dev/null; then
    install_docker
    echo "âœ… Docker instalado. NOTA: Reinicia sesiÃ³n para aplicar permisos de grupo."
else
    echo "âœ… Docker ya estÃ¡ instalado."
fi
# {{ end }}
